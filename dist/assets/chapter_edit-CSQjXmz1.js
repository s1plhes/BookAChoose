import{e as E,y as w,z as I,r as s,g as B,j as h,c as $,k as i,l as m,u as T,a as t,t as o,b as M,w as N,v as S,F as V,f as _,q as A,o as D,H,n as q}from"./index-UL2W14HF.js";import"./trix-C3MFUsML.js";import{c as z}from"./checkAuth-C1L3xOAG.js";const F={class:"container max-w-8xl mx-auto p-3 min-h-fit h-full"},L={class:"text-white space-y-4"},R=t("h2",{class:"text-2xl text-center font-semibold"},"Edit a Chapter",-1),U={class:"text-xl text-center"},j={class:"text-center text-sm text-gray-400"},G={class:"form-group"},J=t("label",{for:"chapter-title",class:"block text-lg font-medium text-gray-100"},"Chapter Title",-1),K={class:"form-group"},O=t("label",{for:"chapter-content",class:"block text-lg font-medium text-gray-100"},"Chapter Content",-1),P={class:"mt-1 bg-slate-100 rounded-md"},Q={class:"text-center"},tt={__name:"chapter_edit",setup(W){const x=E.get("accessToken"),r=w(),v=I(),n=s(""),d=r.params.bookId,c=r.params.chapterId,a=s(""),p=s(""),u=s(""),b=async()=>{try{const e=await _.get(`https://api-db-dbxo.onrender.com/api/book/${d}/chapter/${c}`);n.value=e.data.body,a.value=e.data.title,p.value=e.data.chapter_editor,u.value=e.data.updated_at,document.getElementById("chapter-content").editor.loadHTML(e.data.body)}catch(e){console.error(e)}},f=async()=>{try{await _.put(`https://api-db-dbxo.onrender.com/api/chapter/${c}`,{title:a.value,body:n.value,bookId:r.params.bookId},{headers:{Authorization:`Bearer ${x}`}}),v.push(`/book/${d}/chapter/${c}`)}catch(e){console.error(e)}},y=()=>{n.value=document.getElementById("chapter-content").value};return B(()=>{z(A),b()}),(e,l)=>{const g=h("trix-editor"),k=h("Btn");return D(),$(V,null,[i(T(H),null,{default:m(()=>[t("title",null,`\r
            Edit `+o(a.value)+" | "+o(e.SITE_NAME)+`\r
        `,1)]),_:1}),t("div",F,[t("div",L,[R,t("p",U,o(a.value)+" by "+o(p.value),1),t("p",j,"Last Update: "+o(u.value),1)]),t("form",{onSubmit:M(f,["prevent"]),class:"space-y-6 mt-3"},[t("div",G,[J,N(t("input",{type:"text",id:"chapter-title","onUpdate:modelValue":l[0]||(l[0]=C=>a.value=C),required:"",class:"input",placeholder:"Enter the chapter title"},null,512),[[S,a.value]])]),t("div",K,[O,t("div",P,[i(g,{class:"bg-slate-950 text-slate-100 h-fit min-h-[300px] w-full",id:"chapter-content",onTrixChange:y})])]),t("div",Q,[i(k,{variant:"primary"},{default:m(()=>[q("Submit")]),_:1})])],32)])],64)}}};export{tt as default};

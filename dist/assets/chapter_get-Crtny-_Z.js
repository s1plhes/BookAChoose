import{y as A,r as l,e as D,g as M,A as R,j as d,c,m as U,l as B,u as o,d as i,a as e,k as s,n as m,t as u,s as q,F as G,f as y,o as a,H as J,S as C,q as f}from"./index-UL2W14HF.js";const K=e("meta",{name:"robots",content:"index,follow"},null,-1),O=e("meta",{property:"og:type",content:"website"},null,-1),P=["content"],Q=["content"],W=["content"],X=["content"],Y=["content"],Z={class:"container mx-auto p-4 text-white mb-6 bg-slate-600/10 backdrop-blur-sm rounded-lg"},ee={class:"space-y-3 mb-6"},te={key:0,class:"p-2 inline-flex items-center backdrop-blur-sm bg-slate-950 rounded space-x-5"},oe={key:0,class:"space-x-4"},ne={key:1},se=e("i",{class:"fa fa-heart"},null,-1),ae=e("span",null,"Font Size:",-1),re=e("i",{class:"fa-solid fa-circle-minus"},null,-1),le=[re],ce=e("i",{class:"fa-solid fa-circle-plus"},null,-1),ie=[ce],de={key:0},ue={class:"text-3xl font-semibold mb-4"},pe=["href"],_e=e("hr",{class:"border-gray-700/20 my-4"},null,-1),he=["innerHTML"],me={class:"mt-6 py-6 flex justify-center"},fe=["href"],ve=e("div",{class:"text-2xl ml-6 text-white"},null,-1),xe={__name:"chapter_get",setup(ke){const p=A(),t=l(null),v=l(null),g=p.params.chapterId,_=l(D.get("fontSize")||18),I=l(!1),r=p.params.bookId,h=p.params.chapterId,k=l(0);l(1);const S=async()=>{try{const{data:n}=await y.get(`https://api-db-dbxo.onrender.com/api/book/${r}/chapter/${h}`);t.value=n,v.value=z(n.body)}catch{console.error("Error fetching book")}};function z(n){return n.trim().split(/\n\s*\n/).map((b,x)=>`<div id="para-${x+1}">${b.trim()}</div>`).join("")}const L=()=>{_.value+=2},V=()=>{_.value-=2},T=async()=>{if(!I.value)try{await y.post(`https://api-db-dbxo.onrender.com/api/chapter/${g}/view`),I.value=!0,console.log("View recorded")}catch{console.error("Error recording view")}},N=async()=>{try{const{data:n}=await y.get(`https://api-db-dbxo.onrender.com/api/count/likes/${r}/${h}`);n&&typeof n.likes=="number"?(k.value=n.likes,console.log("Likes count:",k.value)):console.error("Unexpected response structure:",n)}catch(n){console.error("Error getting likes",n)}};let w,$=parseInt(p.params.chapterId)+parseInt(1);return M(()=>{S(),N(),w=setTimeout(()=>{T()},59e3)}),R(()=>{clearTimeout(w)}),(n,E)=>{const b=d("Back"),x=d("Btn"),F=d("LikeBtn"),j=d("ViewIcon"),H=d("Comments");return a(),c(G,null,[t.value?(a(),U(o(J),{key:0},{default:B(()=>[e("title",null,u(t.value.title)+" | Book-A-Choose",1),K,O,e("meta",{property:"og:title",content:t.value.title},null,8,P),e("meta",{property:"og:description",content:t.value.description},null,8,Q),e("meta",{property:"og:image",content:t.value.image},null,8,W),e("meta",{property:"og:url",content:n.URL+"/book/"+t.value.id},null,8,X),e("meta",{name:"author",content:t.value.author},null,8,Y)]),_:1})):i("",!0),e("div",Z,[s(b),s(C),e("div",ee,[o(f)&&t.value?(a(),c("div",te,[t.value.chapter_editor===o(f).name?(a(),c("div",oe,[s(x,{variant:"primary",href:`/book/${t.value.book_id}/chapter/${o(g)}/edit`},{default:B(()=>[m(" Edit chapter ")]),_:1},8,["href"])])):i("",!0),o(f)?(a(),c("div",ne,[s(F,{userId:o(f).id,bookId:o(r),chapterId:o(h)},null,8,["userId","bookId","chapterId"])])):i("",!0),e("div",null,[se,m(" "+u(k.value)+" likes",1)]),e("div",null,[s(j),m(" "+u(t.value.views),1)]),e("div",null,[ae,e("button",{type:"button",onClick:V,class:"bg-transparent px-2 py-1 rounded"},le),e("span",null,u(_.value)+"px",1),e("button",{type:"button",onClick:L,class:"bg-transparent px-2 py-1 rounded"},ie)])])):i("",!0)]),t.value?(a(),c("div",de,[e("h2",ue,u(t.value.title),1),m(),e("a",{class:"text-xl",href:`/book/${o(r)}/chapter/${o($)}`,text:"Next Chapter"},null,8,pe)])):i("",!0),_e,v.value?(a(),c("div",{key:1,innerHTML:v.value,style:q({fontSize:_.value+"px"}),class:"text-zinc-300 leading-relaxed first-line:uppercase first-line:tracking-widest first-letter:text-slate-900 first-letter:text-7xl first-letter:leading-none first-letter:float-left first-letter:font-bold first-letter:mr-3 dark:first-letter:text-white text-justify"},null,12,he)):i("",!0),e("div",me,[s(C),e("a",{class:"text-xl",href:`/book/${o(r)}/chapter/${o($)}`,text:"Next Chapter"},null,8,fe),ve]),s(H,{bookId:o(r),chapterId:o(h)},null,8,["bookId","chapterId"])])],64)}}};export{xe as default};

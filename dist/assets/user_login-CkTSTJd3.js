import{_ as E,r as d,z as T,j as g,c as h,k as _,l as A,a as e,b as L,w as b,v as y,t as m,d as k,F as N,J as V,o as f,p as B,i as C,f as F,e as u,K as P,q as p}from"./index-UL2W14HF.js";const o=n=>(B("data-v-e5e1d8ad"),n=n(),C(),n),z={class:"grid lg:grid-cols-2 sm:grid-cols-1 mx-auto my-8 max-w-6xl min-h-screen"},H={class:"w-full max-w-screen-md p-8 justify-self-center"},q=o(()=>e("div",{class:"text-slate-100 text-center"},"Share with us",-1)),J={class:"px-6"},j={class:"w-full space-y-4"},D=o(()=>e("h1",{class:"text-2xl font-bold text-slate-200"},"Log in to your account",-1)),$=o(()=>e("label",{for:"email",class:"block text-slate-200 font-semibold"},"Email Address",-1)),R=o(()=>e("label",{for:"password",class:"block text-slate-200 font-semibold"},"Password",-1)),U=o(()=>e("div",{class:"text-right"},[e("a",{href:"#",class:"text-sm font-semibold text-slate-200 hover:text-yellow-700 focus:text-yellow-700"},"Forgot Password?")],-1)),W=o(()=>e("button",{type:"submit",class:"p-4 rounded-md bg-yellow-500 text-black w-full"}," Login ",-1)),G=V('<hr class="my-6 border-gray-300" data-v-e5e1d8ad><button type="button" class="w-full bg-white hover:bg-gray-100 focus:bg-gray-100 text-gray-900 font-semibold rounded-lg px-4 py-3 border border-gray-300 flex items-center justify-center transition duration-300 ease-in-out" data-v-e5e1d8ad><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="w-6 h-6" viewBox="0 0 48 48" data-v-e5e1d8ad><defs data-v-e5e1d8ad><path id="a" d="M44.5 20H24v8.5h11.8C34.7 33.9 30.1 37 24 37c-7.2 0-13-5.8-13-13s5.8-13 13-13c3.1 0 5.9 1.1 8.1 2.9l6.4-6.4C34.6 4.1 29.6 2 24 2 11.8 2 2 11.8 2 24s9.8 22 22 22c11 0 21-8 21-22 0-1.3-.2-2.7-.5-4z" data-v-e5e1d8ad></path></defs><clipPath id="b" data-v-e5e1d8ad><use xlink:href="#a" overflow="visible" data-v-e5e1d8ad></use></clipPath><path clip-path="url(#b)" fill="#FBBC05" d="M0 37V11l17 13z" data-v-e5e1d8ad></path><path clip-path="url(#b)" fill="#EA4335" d="M0 11l17 13 7-6.1L48 14V0H0z" data-v-e5e1d8ad></path><path clip-path="url(#b)" fill="#34A853" d="M0 37l30-23 7.9 1L48 0v48H0z" data-v-e5e1d8ad></path><path clip-path="url(#b)" fill="#4285F4" d="M48 48L17 24l-4-3 35-10z" data-v-e5e1d8ad></path></svg><span class="ml-4" data-v-e5e1d8ad>Log in with Google</span></button><p class="mt-8 text-center text-slate-200" data-v-e5e1d8ad> Need an account? <a href="/register" class="text-yellow-500 hover:text-yellow-700 font-semibold" data-v-e5e1d8ad>Create an account</a></p>',3),K={key:0,class:"text-red-500 text-center"},O={key:1,class:"text-green-500 text-center"},Q={__name:"user_login",setup(n){const i=d(""),c=d(""),a=d(""),x=d(""),w=d(!1),S=T(),I=()=>!i.value||!c.value?(a.value="Both email and password are required.",!1):!0,M=async()=>{if(I()){w.value=!0;try{const t=await F.post("https://api-db-dbxo.onrender.com/api/login",{email:i.value,password:c.value});if(t.status===200&&t.data.accessToken){const s=t.data.accessToken;u.set("accessToken",s,{expires:7});const l=P(s);if(l&&l.userId){const r=await F.get(`https://api-db-dbxo.onrender.com/api/users/${l.userId}`);r.status===200&&r.data?(p.value=r.data,u.set("avatar",p.value.avatar,{expires:7}),u.set("name",p.value.name,{expires:7}),u.set("user",JSON.stringify(p.value),{expires:7}),setTimeout(()=>{S.push("/")},800)):a.value="Failed to fetch user data."}else a.value="Invalid token or user ID."}else a.value="An unknown error occurred. Please try again."}catch(t){if(t.response)switch(t.response.status){case 401:a.value="Invalid email or password.";break;case 500:a.value="Server error, please try again later.";break;default:a.value="An unknown error occurred."}else a.value="Network error. Please check your connection."}finally{w.value=!1}}};return(t,s)=>{const l=g("Head"),r=g("Logo");return f(),h(N,null,[_(l,null,{default:A(()=>[e("title",null,"Sign in | "+m(t.SITE_NAME),1)]),_:1}),e("section",z,[e("div",H,[_(r,{class:"mx-auto",colour:"#FEFFFA",width:"300px"}),q]),e("div",J,[e("div",j,[D,e("form",{class:"space-y-4",onSubmit:L(M,["prevent"])},[e("div",null,[$,b(e("input",{type:"email",id:"email","onUpdate:modelValue":s[0]||(s[0]=v=>i.value=v),placeholder:"Enter Email Address",class:"input",autofocus:"",autocomplete:"on",required:""},null,512),[[y,i.value]])]),e("div",null,[R,b(e("input",{type:"password",id:"password","onUpdate:modelValue":s[1]||(s[1]=v=>c.value=v),placeholder:"Enter Password",minlength:"8",autocomplete:"on",class:"input",required:""},null,512),[[y,c.value]])]),U,W],32),G,a.value?(f(),h("p",K,m(a.value),1)):k("",!0),x.value?(f(),h("p",O,m(x.value),1)):k("",!0)])])])],64)}}},Y=E(Q,[["__scopeId","data-v-e5e1d8ad"]]);export{Y as default};

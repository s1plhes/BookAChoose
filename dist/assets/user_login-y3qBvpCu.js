import{_ as E,r as c,z as L,j as _,c as f,k as b,l as T,a as e,b as N,w as y,v as k,t as h,d as F,F as P,J as V,o as m,p as B,i as C,f as I,e as u,K as z,q as p}from"./index-BFBO9Br6.js";const o=n=>(B("data-v-167f4c56"),n=n(),C(),n),H={class:"grid lg:grid-cols-2 sm:grid-cols-1 mx-auto my-8 max-w-6xl min-h-screen"},q={class:"w-full max-w-screen-md p-8 justify-self-center"},J=o(()=>e("div",{class:"text-slate-100 text-center"},"Share with us",-1)),j={class:"px-6"},D={class:"w-full space-y-4"},R=o(()=>e("h1",{class:"text-2xl font-bold text-slate-200"},"Log in to your account",-1)),U=o(()=>e("label",{for:"email",class:"block text-slate-200 font-semibold"},"Email Address",-1)),$=o(()=>e("label",{for:"password",class:"block text-slate-200 font-semibold"},"Password",-1)),W=o(()=>e("div",{class:"text-right"},[e("a",{href:"#",class:"text-sm font-semibold text-slate-200 hover:text-yellow-700 focus:text-yellow-700"},"Forgot Password?")],-1)),G=o(()=>e("button",{type:"submit",class:"p-4 rounded-md bg-yellow-500 text-black w-full"}," Login ",-1)),K=V('<hr class="my-6 border-gray-300" data-v-167f4c56><button type="button" class="w-full bg-white hover:bg-gray-100 focus:bg-gray-100 text-gray-900 font-semibold rounded-lg px-4 py-3 border border-gray-300 flex items-center justify-center transition duration-300 ease-in-out" data-v-167f4c56><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="w-6 h-6" viewBox="0 0 48 48" data-v-167f4c56><defs data-v-167f4c56><path id="a" d="M44.5 20H24v8.5h11.8C34.7 33.9 30.1 37 24 37c-7.2 0-13-5.8-13-13s5.8-13 13-13c3.1 0 5.9 1.1 8.1 2.9l6.4-6.4C34.6 4.1 29.6 2 24 2 11.8 2 2 11.8 2 24s9.8 22 22 22c11 0 21-8 21-22 0-1.3-.2-2.7-.5-4z" data-v-167f4c56></path></defs><clipPath id="b" data-v-167f4c56><use xlink:href="#a" overflow="visible" data-v-167f4c56></use></clipPath><path clip-path="url(#b)" fill="#FBBC05" d="M0 37V11l17 13z" data-v-167f4c56></path><path clip-path="url(#b)" fill="#EA4335" d="M0 11l17 13 7-6.1L48 14V0H0z" data-v-167f4c56></path><path clip-path="url(#b)" fill="#34A853" d="M0 37l30-23 7.9 1L48 0v48H0z" data-v-167f4c56></path><path clip-path="url(#b)" fill="#4285F4" d="M48 48L17 24l-4-3 35-10z" data-v-167f4c56></path></svg><span class="ml-4" data-v-167f4c56>Log in with Google</span></button><p class="mt-8 text-center text-slate-200" data-v-167f4c56> Need an account? <a href="/register" class="text-yellow-500 hover:text-yellow-700 font-semibold" data-v-167f4c56>Create an account</a></p>',3),O={key:0,class:"text-red-500 text-center"},Q={key:1,class:"text-green-500 text-center"},X={__name:"user_login",setup(n){const i=c(""),d=c(""),t=c(""),w=c(""),x=c(!1),S=L(),g="https://api-db-dbxo.onrender.com/api",M=()=>!i.value||!d.value?(t.value="Both email and password are required.",!1):!0,A=async()=>{if(M()){x.value=!0;try{const s=await I.post(`${g}/login`,{email:i.value,password:d.value});if(s.status===200&&s.data.accessToken){const a=s.data.accessToken;u.set("accessToken",a,{expires:7});const l=z(a);if(l&&l.userId){const r=await I.get(`${g}/users/${l.userId}`);r.status===200&&r.data?(p.value=r.data,u.set("avatar",p.value.avatar,{expires:7}),u.set("name",p.value.name,{expires:7}),u.set("user",JSON.stringify(p.value),{expires:7}),setTimeout(()=>{S.push("/")},800)):t.value="Failed to fetch user data."}else t.value="Invalid token or user ID."}else t.value="An unknown error occurred. Please try again."}catch(s){if(s.response)switch(s.response.status){case 401:t.value="Invalid email or password.";break;case 500:t.value="Server error, please try again later.";break;default:t.value="An unknown error occurred."}else t.value="Network error. Please check your connection."}finally{x.value=!1}}};return(s,a)=>{const l=_("Head"),r=_("Logo");return m(),f(P,null,[b(l,null,{default:T(()=>[e("title",null,"Sign in | "+h(s.SITE_NAME),1)]),_:1}),e("section",H,[e("div",q,[b(r,{class:"mx-auto",colour:"#FEFFFA",width:"300px"}),J]),e("div",j,[e("div",D,[R,e("form",{class:"space-y-4",onSubmit:N(A,["prevent"])},[e("div",null,[U,y(e("input",{type:"email",id:"email","onUpdate:modelValue":a[0]||(a[0]=v=>i.value=v),placeholder:"Enter Email Address",class:"input",autofocus:"",autocomplete:"on",required:""},null,512),[[k,i.value]])]),e("div",null,[$,y(e("input",{type:"password",id:"password","onUpdate:modelValue":a[1]||(a[1]=v=>d.value=v),placeholder:"Enter Password",minlength:"8",autocomplete:"on",class:"input",required:""},null,512),[[k,d.value]])]),W,G],32),K,t.value?(m(),f("p",O,h(t.value),1)):F("",!0),w.value?(m(),f("p",Q,h(w.value),1)):F("",!0)])])])],64)}}},Z=E(X,[["__scopeId","data-v-167f4c56"]]);export{Z as default};

import{e as I,y as w,z as B,r as s,g as $,j as m,c as T,k as i,l as _,u as M,a as t,t as o,b as A,w as N,v as S,F as V,f as x,q as D,o as H,H as L,n as R}from"./index-BFBO9Br6.js";import"./trix-C3MFUsML.js";import{c as U}from"./checkAuth-BEeJuQFR.js";const q={class:"container max-w-8xl mx-auto p-3 min-h-fit h-full"},z={class:"text-white space-y-4"},F=t("h2",{class:"text-2xl text-center font-semibold"},"Edit a Chapter",-1),j={class:"text-xl text-center"},P={class:"text-center text-sm text-gray-400"},G={class:"form-group"},J=t("label",{for:"chapter-title",class:"block text-lg font-medium text-gray-100"},"Chapter Title",-1),K={class:"form-group"},O=t("label",{for:"chapter-content",class:"block text-lg font-medium text-gray-100"},"Chapter Content",-1),Q={class:"mt-1 bg-slate-100 rounded-md"},W={class:"text-center"},et={__name:"chapter_edit",setup(X){const v=I.get("accessToken"),r=w(),f=B(),n=s(""),d=r.params.bookId,c=r.params.chapterId,a=s(""),p=s(""),u=s(""),h="https://api-db-dbxo.onrender.com/api",b=async()=>{try{const e=await x.get(`${h}/book/${d}/chapter/${c}`);n.value=e.data.body,a.value=e.data.title,p.value=e.data.chapter_editor,u.value=e.data.updated_at,document.getElementById("chapter-content").editor.loadHTML(e.data.body)}catch(e){console.error(e)}},y=async()=>{try{await x.put(`${h}/chapter/${c}`,{title:a.value,body:n.value,bookId:r.params.bookId},{headers:{Authorization:`Bearer ${v}`}}),f.push(`/book/${d}/chapter/${c}`)}catch(e){console.error(e)}},g=()=>{n.value=document.getElementById("chapter-content").value};return $(()=>{U(D),b()}),(e,l)=>{const k=m("trix-editor"),C=m("Btn");return H(),T(V,null,[i(M(L),null,{default:_(()=>[t("title",null,`\r
            Edit `+o(a.value)+" | "+o(e.SITE_NAME)+`\r
        `,1)]),_:1}),t("div",q,[t("div",z,[F,t("p",j,o(a.value)+" by "+o(p.value),1),t("p",P,"Last Update: "+o(u.value),1)]),t("form",{onSubmit:A(y,["prevent"]),class:"space-y-6 mt-3"},[t("div",G,[J,N(t("input",{type:"text",id:"chapter-title","onUpdate:modelValue":l[0]||(l[0]=E=>a.value=E),required:"",class:"input",placeholder:"Enter the chapter title"},null,512),[[S,a.value]])]),t("div",K,[O,t("div",Q,[i(k,{class:"bg-slate-950 text-slate-100 h-fit min-h-[300px] w-full",id:"chapter-content",onTrixChange:g})])]),t("div",W,[i(C,{variant:"primary"},{default:_(()=>[R("Submit")]),_:1})])],32)])],64)}}};export{et as default};
